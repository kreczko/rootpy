
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>rootpy.plotting.views &mdash; rootpy 0.7.0-a0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/clean.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.7.0-a0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="rootpy 0.7.0-a0 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../../../_static/clean_small.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>
  
  
  
    <a href="http://github.com/rootpy/rootpy"><img style="position: fixed; top: 0; right: 0; border: 0;"
    src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">rootpy 0.7.0-a0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for rootpy.plotting.views</h1><div class="highlight"><pre>
<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">=====================</span>
<span class="sd">Folder &quot;View&quot; Classes</span>
<span class="sd">=====================</span>

<span class="sd">These classes wrap Directories and perform automatic actions</span>
<span class="sd">to Histograms retrieved from them.  The different views can be composited and</span>
<span class="sd">layered.</span>

<span class="sd">Summary of views:</span>

<span class="sd">- ScaleView: scale histogram normalization</span>
<span class="sd">- NormalizeView: normalize histograms</span>
<span class="sd">- SumView: sum histograms from different folders together</span>
<span class="sd">- StyleError: apply a style to histograms</span>
<span class="sd">- StackView: build THStacks using histograms from different folders</span>
<span class="sd">- TitleView: change the title of histograms</span>
<span class="sd">- FunctorView: apply a arbitrary transformation function to the histograms</span>
<span class="sd">- MultiFunctorView: apply a arbitrary transformation function to a collection of histograms</span>
<span class="sd">- SubdirectoryView: A view of a subdirectory, which maintains the same view as the base.</span>

<span class="sd">Example use case</span>
<span class="sd">================</span>

<span class="sd">One has a ROOT file with the following content::</span>

<span class="sd">    zjets/mutau_mass</span>
<span class="sd">    zz/mutau_mass</span>
<span class="sd">    wz/mutau_mass</span>
<span class="sd">    data_2010/mutau_mass</span>
<span class="sd">    data_2011/mutau_mass</span>

<span class="sd">and wants to do the following:</span>

<span class="sd">1. Merge the two data taking periods together</span>
<span class="sd">2. Scale the Z, WZ, and ZZ simulated results to the appropriate int. lumi.</span>
<span class="sd">3. Combine WZ and ZZ into a single diboson sample</span>
<span class="sd">4. Apply different colors to the MC samples</span>
<span class="sd">5. Make a Stack of the expected yields from different simulated processes</span>

<span class="sd">This example can be tested by running::</span>

<span class="sd">    python -m rootpy.plotting.views</span>

<span class="sd">&gt;&gt;&gt; # Mock up the example test case</span>
<span class="sd">&gt;&gt;&gt; import rootpy.io as io</span>
<span class="sd">&gt;&gt;&gt; # We have to keep these, to make sure PyROOT doesn&#39;t garbage collect them</span>
<span class="sd">&gt;&gt;&gt; keep = []</span>
<span class="sd">&gt;&gt;&gt; zjets_dir = io.Directory(&#39;zjets&#39;, &#39;Zjets directory&#39;)</span>
<span class="sd">&gt;&gt;&gt; zz_dir = io.Directory(&#39;zz&#39;, &#39;ZZ directory&#39;)</span>
<span class="sd">&gt;&gt;&gt; wz_dir = io.Directory(&#39;wz&#39;, &#39;WZ directory&#39;)</span>
<span class="sd">&gt;&gt;&gt; data2010_dir = io.Directory(&#39;data2010&#39;, &#39;data2010 directory&#39;)</span>
<span class="sd">&gt;&gt;&gt; data2011_dir = io.Directory(&#39;data2011&#39;, &#39;data2011 directory&#39;)</span>
<span class="sd">&gt;&gt;&gt; # Make the Zjets case</span>
<span class="sd">&gt;&gt;&gt; _ = zjets_dir.cd()</span>
<span class="sd">&gt;&gt;&gt; zjets_hist = ROOT.TH1F(&quot;mutau_mass&quot;, &quot;Mu-Tau mass&quot;, 100, 0, 100)</span>
<span class="sd">&gt;&gt;&gt; zjets_hist.FillRandom(&#39;gaus&#39;, 5000)</span>
<span class="sd">&gt;&gt;&gt; keep.append(zjets_hist)</span>
<span class="sd">&gt;&gt;&gt; # Make the ZZ case</span>
<span class="sd">&gt;&gt;&gt; _ = zz_dir.cd()</span>
<span class="sd">&gt;&gt;&gt; zz_hist = ROOT.TH1F(&quot;mutau_mass&quot;, &quot;Mu-Tau mass&quot;, 100, 0, 100)</span>
<span class="sd">&gt;&gt;&gt; zz_hist.FillRandom(&#39;gaus&#39;, 5000)</span>
<span class="sd">&gt;&gt;&gt; keep.append(zz_hist)</span>
<span class="sd">&gt;&gt;&gt; # Make the WZ case</span>
<span class="sd">&gt;&gt;&gt; _ = wz_dir.cd()</span>
<span class="sd">&gt;&gt;&gt; wz_hist = ROOT.TH1F(&quot;mutau_mass&quot;, &quot;Mu-Tau mass&quot;, 100, 0, 100)</span>
<span class="sd">&gt;&gt;&gt; wz_hist.FillRandom(&#39;gaus&#39;, 5000)</span>
<span class="sd">&gt;&gt;&gt; keep.append(wz_hist)</span>
<span class="sd">&gt;&gt;&gt; # Make the 2010 data case</span>
<span class="sd">&gt;&gt;&gt; _ = data2010_dir.cd()</span>
<span class="sd">&gt;&gt;&gt; data2010_hist = ROOT.TH1F(&quot;mutau_mass&quot;, &quot;Mu-Tau mass&quot;, 100, 0, 100)</span>
<span class="sd">&gt;&gt;&gt; data2010_hist.FillRandom(&#39;gaus&#39;, 30)</span>
<span class="sd">&gt;&gt;&gt; keep.append(data2010_hist)</span>
<span class="sd">&gt;&gt;&gt; # Make the 2011 data case</span>
<span class="sd">&gt;&gt;&gt; _ = data2011_dir.cd()</span>
<span class="sd">&gt;&gt;&gt; data2011_hist = ROOT.TH1F(&quot;mutau_mass&quot;, &quot;Mu-Tau mass&quot;, 100, 0, 100)</span>
<span class="sd">&gt;&gt;&gt; data2011_hist.FillRandom(&#39;gaus&#39;, 51)</span>
<span class="sd">&gt;&gt;&gt; keep.append(data2011_hist)</span>

<span class="sd">SumView</span>
<span class="sd">-------</span>

<span class="sd">We can merge the two data periods into a single case using a SumView.</span>

<span class="sd">&gt;&gt;&gt; data = SumView(data2010_dir, data2011_dir)</span>
<span class="sd">&gt;&gt;&gt; data_hist = data.Get(&quot;mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; data_hist.Integral()</span>
<span class="sd">81.0</span>
<span class="sd">&gt;&gt;&gt; data_hist.Integral() == data2010_hist.Integral() + data2011_hist.Integral()</span>
<span class="sd">True</span>

<span class="sd">ScaleView</span>
<span class="sd">---------</span>

<span class="sd">The simulated results (Z &amp; diboson) can be scaled to the expected integrated</span>
<span class="sd">luminosity using ScaleViews.</span>

<span class="sd">&gt;&gt;&gt; zjets = ScaleView(zjets_dir, 0.01)</span>
<span class="sd">&gt;&gt;&gt; zjets_hist = zjets.Get(&quot;mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; abs(zjets_hist.Integral() - 50.0) &lt; 1e-5</span>
<span class="sd">True</span>
<span class="sd">&gt;&gt;&gt; # Scale the diboson contribution</span>
<span class="sd">&gt;&gt;&gt; zz = ScaleView(zz_dir, 0.001)</span>
<span class="sd">&gt;&gt;&gt; wz = ScaleView(wz_dir, 0.003)</span>

<span class="sd">Combining views</span>
<span class="sd">---------------</span>

<span class="sd">The dibosons individually are tiny, let&#39;s put them together using a SumView.</span>
<span class="sd">Note that this operation nests two ScaleViews into a SumView.</span>

<span class="sd">&gt;&gt;&gt; dibosons = SumView(zz, wz)</span>
<span class="sd">&gt;&gt;&gt; # We expect 5000*0.001 + 5000*0.003 = 20 events</span>
<span class="sd">&gt;&gt;&gt; dibosons_hist = dibosons.Get(&quot;mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; abs(dibosons_hist.Integral() - 20) &lt; 1e-4</span>
<span class="sd">True</span>

<span class="sd">StyleView</span>
<span class="sd">---------</span>

<span class="sd">A style view automatically applies a style to retrieved Plottable objects.</span>
<span class="sd">The style is specified using the same arguments as the Plottable.decorate.</span>
<span class="sd">Let&#39;s make the Z background red and the diboson background blue.</span>

<span class="sd">&gt;&gt;&gt; zjets = StyleView(zjets, fillcolor=ROOT.EColor.kRed)</span>
<span class="sd">&gt;&gt;&gt; dibosons = StyleView(dibosons, fillcolor=ROOT.EColor.kBlue)</span>
<span class="sd">&gt;&gt;&gt; zjets_hist = zjets.Get(&quot;mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; zjets_hist.GetFillColor() == ROOT.EColor.kRed</span>
<span class="sd">True</span>
<span class="sd">&gt;&gt;&gt; dibosons_hist = dibosons.Get(&quot;mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; dibosons_hist.GetFillColor() == ROOT.EColor.kBlue</span>
<span class="sd">True</span>

<span class="sd">StackView</span>
<span class="sd">---------</span>

<span class="sd">The StackView combines multiple items into a HistStack.  In our example</span>
<span class="sd">we stack the SM backgrounds to compare to the data.</span>

<span class="sd">&gt;&gt;&gt; sm_bkg = StackView(zjets, dibosons)</span>
<span class="sd">&gt;&gt;&gt; sm_bkg_stack = sm_bkg.Get(&quot;mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; &#39;%0.0f&#39; % sm_bkg_stack.Integral()</span>
<span class="sd">&#39;70&#39;</span>

<span class="sd">Looks like we have an excess of 11 events - must be the Higgs.</span>


<span class="sd">Other Examples</span>
<span class="sd">==============</span>

<span class="sd">NormalizeView</span>
<span class="sd">-------------</span>

<span class="sd">The normalization view renormalizes histograms to a given value (default 1.0).</span>
<span class="sd">Here is an example of using the NormalizeView to compare the Z and diboson</span>
<span class="sd">shapes.</span>

<span class="sd">&gt;&gt;&gt; z_shape = NormalizeView(zjets)</span>
<span class="sd">&gt;&gt;&gt; z_shape_hist = z_shape.Get(&quot;mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; abs(1 - z_shape_hist.Integral()) &lt; 1e-5</span>
<span class="sd">True</span>
<span class="sd">&gt;&gt;&gt; # Let&#39;s compare the shapes using a HistStack, using the &quot;nostack&quot; option.</span>
<span class="sd">&gt;&gt;&gt; diboson_shape = NormalizeView(dibosons)</span>
<span class="sd">&gt;&gt;&gt; shape_comparison = StackView(z_shape, diboson_shape)</span>
<span class="sd">&gt;&gt;&gt; # To draw the comparison:</span>
<span class="sd">&gt;&gt;&gt; # shape_comparison.Get(&quot;mutau_mass&quot;).Draw(&#39;nostack&#39;)</span>

<span class="sd">FunctorView</span>
<span class="sd">-----------</span>

<span class="sd">FunctorView allows you to apply an arbitrary transformation to the object.  Here</span>
<span class="sd">we show how you can change the axis range for all histograms in a directory.</span>

<span class="sd">&gt;&gt;&gt; rebin = lambda x: x.Rebin(2)</span>
<span class="sd">&gt;&gt;&gt; zjets_rebinned = FunctorView(zjets, rebin)</span>
<span class="sd">&gt;&gt;&gt; zjets.Get(&quot;mutau_mass&quot;).GetNbinsX()</span>
<span class="sd">100</span>
<span class="sd">&gt;&gt;&gt; zjets_rebinned.Get(&quot;mutau_mass&quot;).GetNbinsX()</span>
<span class="sd">50</span>

<span class="sd">The functor doesn&#39;t have to return a histogram.</span>

<span class="sd">&gt;&gt;&gt; mean_getter = lambda x: x.GetMean()</span>
<span class="sd">&gt;&gt;&gt; mean = zjets.Get(&quot;mutau_mass&quot;).GetMean()</span>
<span class="sd">&gt;&gt;&gt; zjets_mean = FunctorView(zjets, mean_getter)</span>
<span class="sd">&gt;&gt;&gt; zjets_mean.Get(&quot;mutau_mass&quot;) == mean</span>
<span class="sd">True</span>


<span class="sd">MultiFunctorView</span>
<span class="sd">----------------</span>

<span class="sd">MultiFunctorView is similar except that it operates on a group of histograms.</span>
<span class="sd">The functor should take one argument, a *generator* of the sub-objects.</span>

<span class="sd">Here&#39;s an example to get the integral of the biggest histogram in a set:</span>

<span class="sd">&gt;&gt;&gt; biggest_histo = lambda objects: max(y.Integral() for y in objects)</span>
<span class="sd">&gt;&gt;&gt; biggest = MultiFunctorView(biggest_histo, zjets, dibosons)</span>
<span class="sd">&gt;&gt;&gt; biggest.Get(&quot;mutau_mass&quot;) == zjets.Get(&quot;mutau_mass&quot;).Integral()</span>
<span class="sd">True</span>

<span class="sd">SubdirectoryView</span>
<span class="sd">----------------</span>

<span class="sd">If you&#39;d like to &quot;cd&quot; into a lower subdirectory, while still maintaining</span>
<span class="sd">the same view, use a SubdirectoryView.</span>

<span class="sd">&gt;&gt;&gt; basedir = io.Directory(&#39;base&#39;, &#39;base directory&#39;)</span>
<span class="sd">&gt;&gt;&gt; _ = basedir.cd()</span>
<span class="sd">&gt;&gt;&gt; subdir1 = io.Directory(&#39;subdir1&#39;, &#39;subdir directory in 1&#39;)</span>
<span class="sd">&gt;&gt;&gt; _ = subdir1.cd()</span>
<span class="sd">&gt;&gt;&gt; hist = ROOT.TH1F(&quot;mutau_mass&quot;, &quot;Mu-Tau mass&quot;, 100, 0, 100)</span>
<span class="sd">&gt;&gt;&gt; hist.FillRandom(&#39;gaus&#39;, 2000)</span>
<span class="sd">&gt;&gt;&gt; keep.append(hist)</span>
<span class="sd">&gt;&gt;&gt; _ = basedir.cd()</span>
<span class="sd">&gt;&gt;&gt; subdir2 = io.Directory(&#39;subdir2&#39;, &#39;subdir directory 2&#39;)</span>
<span class="sd">&gt;&gt;&gt; _ = subdir2.cd()</span>
<span class="sd">&gt;&gt;&gt; hist = ROOT.TH1F(&quot;mutau_mass&quot;, &quot;Mu-Tau mass&quot;, 100, 0, 100)</span>
<span class="sd">&gt;&gt;&gt; hist.FillRandom(&#39;gaus&#39;, 5000)</span>
<span class="sd">&gt;&gt;&gt; keep.append(hist)</span>

<span class="sd">The directory structure is now::</span>
<span class="sd">    base/subdir1/hist</span>
<span class="sd">    base/subdir2/hist</span>

<span class="sd">Subdirectory views work on top of other views.</span>

<span class="sd">&gt;&gt;&gt; baseview = ScaleView(basedir, 0.1)</span>
<span class="sd">&gt;&gt;&gt; subdir1view = SubdirectoryView(baseview, &#39;subdir1&#39;)</span>
<span class="sd">&gt;&gt;&gt; subdir2view = SubdirectoryView(baseview, &#39;subdir2&#39;)</span>
<span class="sd">&gt;&gt;&gt; histo1 = subdir1view.Get(&#39;mutau_mass&#39;)</span>
<span class="sd">&gt;&gt;&gt; histo2 = subdir2view.Get(&#39;mutau_mass&#39;)</span>
<span class="sd">&gt;&gt;&gt; exp_histo1 = baseview.Get(&quot;subdir1/mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; exp_histo2 = baseview.Get(&quot;subdir2/mutau_mass&quot;)</span>
<span class="sd">&gt;&gt;&gt; def equivalent(h1, h2):</span>
<span class="sd">...     return (abs(h1.GetMean() - h2.GetMean()) &lt; 1e-4 and</span>
<span class="sd">...             abs(h1.GetRMS() - h2.GetRMS()) &lt; 1e-4 and</span>
<span class="sd">...             abs(h1.Integral() - h2.Integral()) &lt; 1e-4)</span>
<span class="sd">&gt;&gt;&gt; equivalent(exp_histo1, histo1)</span>
<span class="sd">True</span>
<span class="sd">&gt;&gt;&gt; equivalent(exp_histo2, histo2)</span>
<span class="sd">True</span>
<span class="sd">&gt;&gt;&gt; equivalent(histo1, histo2)</span>
<span class="sd">False</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">ROOT</span>
<span class="kn">from</span> <span class="nn">.core</span> <span class="kn">import</span> <span class="n">Plottable</span>
<span class="kn">from</span> <span class="nn">.hist</span> <span class="kn">import</span> <span class="n">HistStack</span>
<span class="kn">from</span> <span class="nn">..io</span> <span class="kn">import</span> <span class="n">Directory</span><span class="p">,</span> <span class="n">DoesNotExist</span>

<span class="k">class</span> <span class="nc">_FolderView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Abstract view of an individual folder</span>

<span class="sd">    Provides one interface: Get(path) which returns a modified version</span>
<span class="sd">    of whatever exists at path.  Subclasses should define::</span>

<span class="sd">        apply_view(object)</span>

<span class="sd">    which should return the modified [object] as necessary.</span>

<span class="sd">    The subclass can get access to the queried path via the self.getting</span>
<span class="sd">    variable.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Initialize with the directory to be wrapped &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">=</span> <span class="n">directory</span>

    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Get the path of the wrapped folder &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="n">Directory</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">_path</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="n">ROOT</span><span class="o">.</span><span class="n">TDirectory</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">GetPath</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="n">_FolderView</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">path</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">(&#39;</span><span class="si">%s</span><span class="s">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">Get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Get the (modified) object from path &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getting</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_view</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">DoesNotExist</span> <span class="k">as</span> <span class="n">dne</span><span class="p">:</span>
            <span class="c">#print dir(dne)</span>
            <span class="k">raise</span> <span class="n">DoesNotExist</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dne</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;[</span><span class="si">%s</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">_MultiFolderView</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Abstract view of a collection of folders</span>

<span class="sd">    Applies some type of &quot;merge&quot; operation to the result of the get from each</span>
<span class="sd">    folder.  Subclasses should define::</span>

<span class="sd">        merge_views(objects)</span>

<span class="sd">    which takes a *generator* of objects returns a merged object.</span>

<span class="sd">    The subclass can get access to the queried path via the self.getting</span>
<span class="sd">    variable.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">directories</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dirs</span> <span class="o">=</span> <span class="n">directories</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">(</span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span>
                           <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirs</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">Get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Merge the objects at path in all subdirectories &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">merge_views</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirs</span><span class="p">)</span>


<div class="viewcode-block" id="ScaleView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.ScaleView">[docs]</a><span class="k">class</span> <span class="nc">ScaleView</span><span class="p">(</span><span class="n">_FolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; View of a folder which applies a scaling factor to histograms. &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">scale_factor</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ScaleView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="n">scale_factor</span>

<div class="viewcode-block" id="ScaleView.apply_view"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.ScaleView.apply_view">[docs]</a>    <span class="k">def</span> <span class="nf">apply_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="s">&#39;Scale&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s">&quot;ScaleView can&#39;t figure out how to deal&quot;</span>
                <span class="s">&quot; with the object </span><span class="si">%s</span><span class="s">, it has no Scale method&quot;</span> <span class="o">%</span> <span class="nb">object</span><span class="p">)</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">Clone</span><span class="p">()</span>
        <span class="n">clone</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">factor</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">clone</span>
</div></div>
<div class="viewcode-block" id="NormalizeView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.NormalizeView">[docs]</a><span class="k">class</span> <span class="nc">NormalizeView</span><span class="p">(</span><span class="n">ScaleView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Normalize histograms to a constant value &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">normalization</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="c"># Initialize the scale view with a dummy scale factor.</span>
        <span class="c"># The scale factor is changed dynamically for each histogram.</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">NormalizeView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="n">normalization</span>
<div class="viewcode-block" id="NormalizeView.apply_view"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.NormalizeView.apply_view">[docs]</a>    <span class="k">def</span> <span class="nf">apply_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="n">current_norm</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">Integral</span><span class="p">()</span>
        <span class="c"># Update the scale factor (in the base)</span>
        <span class="k">if</span> <span class="n">current_norm</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span><span class="o">/</span><span class="n">current_norm</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">NormalizeView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">apply_view</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="StyleView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.StyleView">[docs]</a><span class="k">class</span> <span class="nc">StyleView</span><span class="p">(</span><span class="n">_FolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    View of a folder which applies a style to Plottable objects.</span>

<span class="sd">    The kwargs are passed to Plottable.decorate</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">StyleView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>

<div class="viewcode-block" id="StyleView.apply_view"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.StyleView.apply_view">[docs]</a>    <span class="k">def</span> <span class="nf">apply_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">Plottable</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">StyleError</span><span class="p">(</span>
                <span class="s">&quot;ScaleView can&#39;t figure out how to deal&quot;</span>
                <span class="s">&quot; with the object </span><span class="si">%s</span><span class="s">, it is not a Plottable subclass&quot;</span> <span class="o">%</span> <span class="nb">object</span><span class="p">)</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">Clone</span><span class="p">()</span>
        <span class="n">clone</span><span class="o">.</span><span class="n">decorate</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">clone</span>
</div></div>
<div class="viewcode-block" id="TitleView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.TitleView">[docs]</a><span class="k">class</span> <span class="nc">TitleView</span><span class="p">(</span><span class="n">_FolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Override the title of gotten histograms &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TitleView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

<div class="viewcode-block" id="TitleView.apply_view"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.TitleView.apply_view">[docs]</a>    <span class="k">def</span> <span class="nf">apply_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">Clone</span><span class="p">()</span>
        <span class="n">clone</span><span class="o">.</span><span class="n">SetTitle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">clone</span>
</div></div>
<div class="viewcode-block" id="SumView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.SumView">[docs]</a><span class="k">class</span> <span class="nc">SumView</span><span class="p">(</span><span class="n">_MultiFolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Add a collection of histograms together &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">directories</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SumView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">directories</span><span class="p">)</span>

<div class="viewcode-block" id="SumView.merge_views"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.SumView.merge_views">[docs]</a>    <span class="k">def</span> <span class="nf">merge_views</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="nb">object</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">Clone</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="nb">object</span>
        <span class="k">return</span> <span class="n">output</span>
</div></div>
<div class="viewcode-block" id="StackView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.StackView">[docs]</a><span class="k">class</span> <span class="nc">StackView</span><span class="p">(</span><span class="n">_MultiFolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Build a HistStack from the input histograms</span>

<span class="sd">    The default draw option that histograms will use is &quot;hist&quot;.</span>

<span class="sd">    One can override this for all histograms by passing a string.</span>
<span class="sd">    Individual behavior can be controlled by passing a list of draw options,</span>
<span class="sd">    corresponding to the input directories. In this case the option for</span>
<span class="sd">    all histograms must be specified.</span>

<span class="sd">    The name and title of the HistStack is taken from the first histogram in the</span>
<span class="sd">    list.</span>

<span class="sd">    Normally the histograms will be added to the stack in the order</span>
<span class="sd">    of the constructor.  Optionally, one can add them in order of ascending</span>
<span class="sd">    integral by passing the kwarg sorted=True.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">directories</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">StackView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">directories</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">sorted</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<div class="viewcode-block" id="StackView.merge_views"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.StackView.merge_views">[docs]</a>    <span class="k">def</span> <span class="nf">merge_views</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort</span><span class="p">:</span>
            <span class="n">objects</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Integral</span><span class="p">())</span>
        <span class="k">for</span> <span class="nb">object</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">HistStack</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="n">GetName</span><span class="p">(),</span> <span class="nb">object</span><span class="o">.</span><span class="n">GetTitle</span><span class="p">())</span>
            <span class="n">output</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>
</div></div>
<div class="viewcode-block" id="FunctorView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.FunctorView">[docs]</a><span class="k">class</span> <span class="nc">FunctorView</span><span class="p">(</span><span class="n">_FolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Apply an arbitrary function to the output histogram.</span>

<span class="sd">    The histogram is always cloned before it is passed to the function.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">function</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FunctorView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

<div class="viewcode-block" id="FunctorView.apply_view"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.FunctorView.apply_view">[docs]</a>    <span class="k">def</span> <span class="nf">apply_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">Clone</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">clone</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="MultiFunctorView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.MultiFunctorView">[docs]</a><span class="k">class</span> <span class="nc">MultiFunctorView</span><span class="p">(</span><span class="n">_MultiFolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Apply an arbitrary function to the output histograms.</span>

<span class="sd">    The function must take one argument, a generator of objects.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">directories</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MultiFunctorView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">directories</span><span class="p">)</span>

<div class="viewcode-block" id="MultiFunctorView.merge_views"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.MultiFunctorView.merge_views">[docs]</a>    <span class="k">def</span> <span class="nf">merge_views</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="PathModifierView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.PathModifierView">[docs]</a><span class="k">class</span> <span class="nc">PathModifierView</span><span class="p">(</span><span class="n">_FolderView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Does some magic to the path</span>

<span class="sd">    User should supply a functor which transforms the path argument</span>
<span class="sd">    passed to Get(...)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">path_modifier</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_modifier</span> <span class="o">=</span> <span class="n">path_modifier</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PathModifierView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>

<div class="viewcode-block" id="PathModifierView.Get"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.PathModifierView.Get">[docs]</a>    <span class="k">def</span> <span class="nf">Get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="n">newpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_modifier</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">PathModifierView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">newpath</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PathModifierView.apply_view"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.PathModifierView.apply_view">[docs]</a>    <span class="k">def</span> <span class="nf">apply_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Do nothing &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="nb">object</span>
</div></div>
<div class="viewcode-block" id="SubdirectoryView"><a class="viewcode-back" href="../../../reference/rootpy.plotting.html#rootpy.plotting.views.SubdirectoryView">[docs]</a><span class="k">class</span> <span class="nc">SubdirectoryView</span><span class="p">(</span><span class="n">PathModifierView</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Add some base directories to the path of Get()</span>

<span class="sd">    &lt;subdir&gt; is the directory you want to &#39;cd&#39; too.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">subdirpath</span><span class="p">):</span>
        <span class="n">functor</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">subdirpath</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SubdirectoryView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">functor</span><span class="p">)</span>

</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2011, Noel Dawe, Jeff Klukas.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>